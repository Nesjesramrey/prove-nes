<div class="set-12 dialog-head">
  <div class="set-9">
    <h3>Agregar Problema</h3>
  </div>
  <div class="set-3 txt-right">
    <button type="button" mat-icon-button color="primary" (click)="killDialog()">
      <mat-icon>cancel</mat-icon>
    </button>
  </div>
</div>

<div class="set-12 loading" *ngIf="!isDataAvailable">
  <mat-spinner diameter="50"></mat-spinner>
</div>

<div class="set-12" *ngIf="isDataAvailable">
  <input type="file" #file (change)="onFileSelected($event)" multiple>
  <mat-stepper labelPosition="bottom" #stepper [disableRipple]="true" [linear]="true" [@.disabled]="true">
    <mat-step [stepControl]="addThemeFormGroup">
      <ng-template matStepLabel>
        <small>Agrega problemática</small>
      </ng-template>

      <div class="set-12 step-content">
        <form [formGroup]="addThemeFormGroup" (submit)="onCreateTopic(addThemeFormGroup)">
          <div class="set-12" *ngIf="!canAddSolution">
            <mat-form-field appearance="outline">
              <mat-label>Título</mat-label>
              <input type="text" matInput formControlName="title">
            </mat-form-field>
          </div>

          <div class="set-12 inpts" *ngIf="!canAddSolution">
            <div class="set-9">
              <mat-form-field appearance="outline">
                <mat-label>Descripción</mat-label>
                <textarea matInput cdkTextareaAutosize formControlName="description"></textarea>
              </mat-form-field>
            </div>

            <div class="set-3">
              <button type="button" class="upload-img" (click)="file.click()">
                <mat-icon>add_a_photo</mat-icon>
              </button>
            </div>
          </div>

          <div class="set-12 topic" *ngIf="canAddSolution">
            <h3>{{topic.title}}</h3>
            <p>{{topic.description}}</p>
            <div class="set-12 ctrls txt-right">
              <button type="button" mat-raised-button color="primary" matStepperNext>Agregar solución</button>
            </div>
          </div>

          <div class="set-12 txt-right ctrls">
            <button type="submit" mat-raised-button color="primary"
              [disabled]="addThemeFormGroup.invalid || isSubmitted" *ngIf="!canAddSolution">Guardar</button>
          </div>
        </form>
      </div>

      <div class="set-12 file-hldr" *ngIf="fileNames.length != 0">
        <p *ngFor="let name of fileNames">
          <small>{{name}}</small>
        </p>
      </div>
    </mat-step>

    <mat-step>
      <ng-template matStepLabel>
        <small>Agrega una solución</small>
      </ng-template>

      <div class="set-12 step-content">
        <form [formGroup]="addSolutionFormGroup" (submit)="onCreateSolution(addSolutionFormGroup)">
          <div class="set-12">
            <mat-form-field appearance="outline">
              <mat-label>Título</mat-label>
              <input type="text" matInput formControlName="title">
            </mat-form-field>
          </div>

          <div class="set-12 inpts">
            <div class="set-9">
              <mat-form-field appearance="outline">
                <mat-label>Descripción</mat-label>
                <textarea matInput cdkTextareaAutosize formControlName="description"></textarea>
              </mat-form-field>
            </div>

            <div class="set-3">
              <button type="button" class="upload-img" (click)="file.click()">
                <mat-icon>add_a_photo</mat-icon>
              </button>
            </div>
          </div>

          <div class="set-12 txt-right ctrls">
            <button type="submit" mat-raised-button color="primary"
              [disabled]="addSolutionFormGroup.invalid || isSubmitted">Guardar</button>
          </div>
        </form>
      </div>
    </mat-step>
  </mat-stepper>
</div>