<div class="set-12 loading" *ngIf="!isDataAvailable">
  <mat-spinner></mat-spinner>
</div>

<!-- desktop -->
<div class="set-12" *ngIf="isDataAvailable && !isMobile">
  <div class="set-12">
    <breadcrumbs-component>
      <li>...</li>
      <li [matTooltip]="document?.title" matTooltipClass="tooltip"
        (click)="utilityService.linkMe('/documentos-publicos/' + document._id)">
        ...
      </li>
      <li [matTooltip]="category?.category?.name" matTooltipClass="tooltip"
        (click)="utilityService.linkMe('/documentos-publicos/' + document._id + '/categoria/' + category._id)">
        ...
      </li>
      <li [matTooltip]="subcategory?.category?.name" matTooltipClass="tooltip"
        (click)="
          utilityService.linkMe('/documentos-publicos/' + document._id + '/categoria/' + category._id + '/subcategoria/' + subcategory._id)">
        {{ subcategory?.category?.name }}
      </li>
      <li [matTooltip]="topic?.title" matTooltipClass="tooltip"
        (click)=" utilityService.linkMe('/documentos-publicos/' + document._id + '/categoria/' + category._id + '/subcategoria/' + subcategory._id + '/tema/' + topic._id)">
        {{ topic.shortTitle }}
      </li>
      <li [matTooltip]="solution?.title" matTooltipClass="tooltip">
        {{ solution.shortTitle }}
      </li>
    </breadcrumbs-component>
  </div>

  <div class="set-12 txt-left" style="margin-bottom: 10px">
    <span class="created-by">
      Autor:
      <span class="author">{{ solution.createdBy.firstname }}
        {{ solution.createdBy.lastname }}</span>
    </span>
  </div>

  <div class="set-12">
    <div class="set-9 col-rgt-3">
      <mat-card>
        <div class="set-12 card-desc">
          <div class="set-12 imghldr">
            <!-- <mat-icon *ngIf="!image">panorama</mat-icon>
            <img *ngIf="image" [src]="image" style="cursor: pointer" (click)="popImageViewer()" /> -->

            <div class="info">
              <div class="actions">
                <div class="set-12">
                  <p>Relevancia ciudadana</p>
                  <p class="votes">{{ stats.score }} / 100</p>
                </div>

                <div class="set-12 vote-status" *ngIf="userVoted">
                  Votos: {{ votes }}
                </div>

                <div class="set-12 vote-status">
                  <button *ngIf="!userVoted" mat-raised-button color="accent" (click)="openModalVote()">
                    <strong>Votar</strong>
                  </button>
                  <mat-spinner diameter="20" *ngIf="submitted"></mat-spinner>
                </div>
              </div>
            </div>
          </div>

          <div class="infohldr">
            <h3>{{ solution.title }}</h3>
            <expanded-text [text]="solution.description" [title]="solution.title"></expanded-text>
          </div>

          <div class="icons">
            <button type="button" mat-mini-fab color="warn" matTooltip="Agregar a favoritos" matTooltipClass="tooltip"
              (click)="addFavorites()" *ngIf="!isFavorites">
              <mat-icon>favorite</mat-icon>
            </button>

            <button type="button" mat-mini-fab color="accent" matTooltip="Agregar a favoritos" matTooltipClass="tooltip"
              (click)="removeFavorites()" *ngIf="isFavorites">
              <mat-icon>favorite</mat-icon>
            </button>

            <button type="button" mat-mini-fab color="warn" matTooltip="Agregar Comentario" matTooltipClass="tooltip"
              (click)="popAddCommentsDialog()">
              <mat-icon>add_comment</mat-icon>
            </button>
            <!-- <button type="button" mat-mini-fab color="warn" matTooltip="Agregar Testimonio" matTooltipClass="tooltip"
              (click)="openModalTestimony(null)">
              <mat-icon>book</mat-icon>
            </button> -->
          </div>
        </div>

        <div class="set-12 mt-2">
          <!-- <div class="set-12 mt-2">
            <div class="set-6 col-rgt-2" style="padding:40px">
              <spider-chart [withBorder]="false"></spider-chart>
            </div>

            <div class="set-6 col-rgt-2">
              <circle-chart></circle-chart>
            </div>

            <div class="set-6"></div>
          </div> -->
        </div>
      </mat-card>
    </div>

    <div class="set-3">
      <public-documents-testimonials [data]="solution.testimonials" (sendTestimonyData)="openModalTestimony($event)">
      </public-documents-testimonials>
    </div>
  </div>
</div>

<!-- mobile -->
<div class="set-12" *ngIf="isDataAvailable && isMobile">
  <div class="public-document-mobile-solution-view" [document]="document" [solution]="solution" [user]="user"
    [userVoted]="userVoted" [votes]="votes" [allFavorites]="allFavorites" (solutionVoted)="getVoteStatus($event)"></div>
</div>